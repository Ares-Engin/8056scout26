<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Register</h1>

<input id="email" class="log-input" placeholder="Email">
<input id="password" type="password" class="log-input" placeholder="Password">
<input id="name" class="log-input" placeholder="Full Name">
<input id="team" class="log-input" placeholder="Team Number">
<input id="code" class="log-input" placeholder="Secret Code">

<button class="log-button" onclick="register()">Create Account</button>
<p id="error"></p>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
<script src="auth.js"></script>

<script>
function register() {
  auth.createUserWithEmailAndPassword(email.value, password.value)
    .then(cred => {
      return db.collection("users").doc(cred.user.uid).set({
        email: email.value,
        name: name.value,
        team: team.value,
        code: code.value,
        role: "new"
      });
    })
    .then(() => location.href = "dashboard.html")
    .catch(e => error.innerText = e.message);
}
</script>

</body>
</html>
