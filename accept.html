<!DOCTYPE html>
<html>
<head>
  <title>User Accept</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>User Approval</h1>
<div id="list"></div>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

<script>
const db = firebase.firestore();

db.collection("users").where("role", "==", "new").get().then(snap => {
  snap.forEach(doc => {
    const d = doc.data();
    const div = document.createElement("div");
    div.innerHTML = `
      ${d.name} (${d.teamNumber})
      <button onclick="setRole('${doc.id}','user')">User</button>
      <button onclick="setRole('${doc.id}','team8056')">Team8056</button>
    `;
    document.getElementById("list").appendChild(div);
  });
});

window.setRole = function (id, role) {
  db.collection("users").doc(id).update({ role }).then(() => location.reload());
};
</script>

</body>
</html>
